<<<<<<< Updated upstream
ï»¿@* Views/Booking/Index.cshtml *@
@model FitnessCenter.Models.BookingViewModel
@{
    ViewData["Title"] = "Randevu Al";
}

<div class="container page-container">
    <h2 class="section-title">Randevu Al</h2>

    <form class="booking-form" method="post" asp-controller="Booking" asp-action="Create">
        <div asp-validation-summary="ModelOnly" class="primary-text" style="color: red; margin-bottom: 1rem;"></div>

        <div class="form-group">
            <label asp-for="ServiceType">Hizmet SeÃ§in *</label>
            <select asp-for="ServiceType" required>
                <option value="">Hizmet seÃ§iniz...</option>
                <option value="Fitness">ğŸ’ª Fitness</option>
                <option value="Yoga">ğŸ§˜ Yoga</option>
                <option value="Pilates">ğŸ¤¸ Pilates</option>
                <option value="Gym">ğŸ‹ï¸ Gym / AÄŸÄ±rlÄ±k</option>
                <option value="Pool">ğŸŠ Havuz</option>
                <option value="Boxing">ğŸ¥Š Boks</option>
            </select>
            <span asp-validation-for="ServiceType" class="primary-text" style="color: red; font-size: 0.85rem;"></span>
        </div>

        <div class="form-group">
            <label asp-for="TrainerId">AntrenÃ¶r SeÃ§in *</label>
            <select asp-for="TrainerId" required>
                <option value="">AntrenÃ¶r seÃ§iniz...</option>
                <option value="1">Ahmet YÄ±lmaz - Fitness & Kilo Verme</option>
                <option value="2">Zeynep Kara - Yoga & Meditasyon</option>
                <option value="3">Mehmet Demir - Pilates & Rehabilitasyon</option>
                <option value="4">AyÅŸe Åahin - Kas GeliÅŸtirme & Powerlifting</option>
                <option value="5">Can Ã–ztÃ¼rk - YÃ¼zme & Su SporlarÄ±</option>
                <option value="6">Burak YÄ±ldÄ±z - Boks & Kickboxing</option>
                <option value="7">Elif Arslan - Grup Dersleri & Zumba</option>
                <option value="8">Emre KoÃ§ - Crossfit & Fonksiyonel</option>
                <option value="9">Selin AydÄ±n - Beslenme & Diyet KoÃ§u</option>
                <option value="10">Kerem Bulut - KiÅŸisel Antrenman & Rehabilitasyon</option>
            </select>
            <span asp-validation-for="TrainerId" class="primary-text" style="color: red; font-size: 0.85rem;"></span>
        </div>

        <div class="form-group">
            <label asp-for="AppointmentDate">Tarih *</label>
            <input type="date" asp-for="AppointmentDate" required>
            <span asp-validation-for="AppointmentDate" class="primary-text" style="color: red; font-size: 0.85rem;"></span>
        </div>

        <div class="form-group">
            <label asp-for="AppointmentTime">Saat *</label>
            <select asp-for="AppointmentTime" required>
                <option value="">Saat seÃ§iniz...</option>
                <option value="09:00">09:00</option>
                <option value="10:00">10:00</option>
                <option value="11:00">11:00</option>
                <option value="12:00">12:00</option>
                <option value="13:00">13:00</option>
                <option value="14:00">14:00</option>
                <option value="15:00">15:00</option>
                <option value="16:00">16:00</option>
                <option value="17:00">17:00</option>
                <option value="18:00">18:00</option>
                <option value="19:00">19:00</option>
                <option value="20:00">20:00</option>
            </select>
            <span asp-validation-for="AppointmentTime" class="primary-text" style="color: red; font-size: 0.85rem;"></span>
        </div>

        <div class="form-group">
            <label asp-for="Notes">Notlar (Opsiyonel)</label>
            <textarea asp-for="Notes" rows="4" placeholder="Ã–zel istekleriniz, saÄŸlÄ±k durumunuz veya hedefleriniz hakkÄ±nda bilgi..."></textarea>
        </div>

        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 1rem; font-size: 1.1rem;">
            Randevu OluÅŸtur
        </button>
    </form>

    <div style="max-width: 600px; margin: 2rem auto; background-color: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border-color);">
        <h4 class="primary-text" style="margin-bottom: 1rem;">ğŸ“‹ Randevu HakkÄ±nda Bilgiler</h4>
        <ul class="secondary-text" style="line-height: 1.8; list-style-position: inside;">
            <li>Randevunuz onaylandÄ±ktan sonra e-posta ile bilgilendirileceksiniz</li>
            <li>Randevunuza 15 dakika erken gelmeniz Ã¶nerilir</li>
            <li>Ä°ptal iÅŸlemleri en geÃ§ 24 saat Ã¶ncesinden yapÄ±lmalÄ±dÄ±r</li>
            <li>Ä°lk seans Ã¶ncesi saÄŸlÄ±k formu doldurulmasÄ± gerekmektedir</li>
        </ul>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // BugÃ¼nÃ¼n tarihinden Ã¶nceki tarihleri seÃ§ememe
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('AppointmentDate').setAttribute('min', today);
=======
ï»¿@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/lib/jquery/dist/jquery.min.js"></script>

    <script>
        $(document).ready(function () {
            // DeÄŸiÅŸkenleri tanÄ±mlÄ±yoruz
            const trainerSelect = $('#TrainerId');
            const dateInput = $('#AppointmentDate');
            const timeSelect = $('#AppointmentTime');

            // -------------------------------------------------------------
            // TARÄ°H KONTROLÃœ (Hata veren kÄ±sÄ±m buraya taÅŸÄ±ndÄ± ve dÃ¼zeltildi)
            // -------------------------------------------------------------

            // BugÃ¼nÃ¼n tarihinden Ã¶nceki tarihleri seÃ§ememe
            const today = new Date().toISOString().split('T')[0];

            // jQuery kullanarak min attribute'Ã¼nÃ¼ ayarla
            if (dateInput.length) {
                dateInput.attr('min', today);
            }


            // -------------------------------------------------------------
            // AJAX ile MÃœSAÄ°T SAATLERÄ° DOLDURMA
            // -------------------------------------------------------------

            // Fonksiyon: MÃ¼sait saatleri API'den Ã§eker ve doldurur
            function updateAvailableSlots() {
                const trainerId = trainerSelect.val();
                const selectedDate = dateInput.val();

                timeSelect.empty();
                timeSelect.append($('<option>', { value: '', text: 'Ã–nce antrenÃ¶r ve tarih seÃ§iniz...' }));

                // EÄŸer antrenÃ¶r seÃ§ili deÄŸilse veya tarih seÃ§ili deÄŸilse iÅŸlemi durdur
                if (!trainerId || !selectedDate) {
                    return;
                }

                timeSelect.append($('<option>', { value: '', text: 'MÃ¼saitlik aranÄ±yor...' }));

                $.ajax({
                    url: '@Url.Action("GetAvailableSlots", "Trainers")',
                    type: 'GET',
                    data: { trainerId: trainerId, date: selectedDate },
                    success: function (slots) {
                        timeSelect.empty();
                        if (slots.length > 0) {
                            timeSelect.append($('<option>', { value: '', text: 'Saat seÃ§iniz...' }));
                            slots.forEach(function (slot) {
                                timeSelect.append($('<option>', {
                                    value: slot,
                                    text: slot
                                }));
                            });
                        } else {
                            timeSelect.append($('<option>', { value: '', text: 'Bu gÃ¼n iÃ§in mÃ¼saitlik yok.' }));
                        }
                    },
                    error: function () {
                        timeSelect.empty();
                        timeSelect.append($('<option>', { value: '', text: 'Hata oluÅŸtu!' }));
                    }
                });
            }

            // AntrenÃ¶r veya Tarih deÄŸiÅŸtiÄŸinde fonksiyonu Ã§alÄ±ÅŸtÄ±r
            trainerSelect.on('change', updateAvailableSlots);
            dateInput.on('change', updateAvailableSlots);

            // Sayfa yÃ¼klendiÄŸinde bir kez Ã§alÄ±ÅŸtÄ±r (varsa varsayÄ±lan deÄŸerler iÃ§in)
            updateAvailableSlots();
        });
>>>>>>> Stashed changes
    </script>
}