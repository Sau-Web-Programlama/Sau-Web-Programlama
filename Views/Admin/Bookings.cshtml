@model IEnumerable<SporSalonu2.Models.Booking>
@{
    ViewData["Title"] = "Randevu Yönetimi";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    /* Admin Tablo Tasarımı */
    .admin-card {
        background-color: #1e272e; /* Koyu zemin */
        border-radius: 15px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.5);
        border: 1px solid rgba(255,255,255,0.05);
        padding: 20px;
    }

    /* Bootstrap tablosunun beyazlığını eziyoruz */
    .table-custom {
        width: 100%;
        color: #d2dae2;
        border-collapse: separate;
        border-spacing: 0 10px; /* Satırlar arası boşluk */
    }

        .table-custom thead th {
            color: #00d2d3; /* Turkuaz başlık */
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.85rem;
            border: none;
            padding-bottom: 15px;
        }

        .table-custom tbody tr {
            background-color: #2f3640; /* Satır rengi */
            transition: transform 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

            .table-custom tbody tr:hover {
                transform: scale(1.01);
                background-color: #353b48;
            }

        .table-custom td {
            padding: 15px;
            border: none;
            vertical-align: middle;
        }

        /* Köşeleri yuvarlatma */
        .table-custom tbody tr td:first-child {
            border-top-left-radius: 10px;
            border-bottom-left-radius: 10px;
        }

        .table-custom tbody tr td:last-child {
            border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;
        }

    /* Metin stilleri */
    .user-email {
        color: #00d2d3;
        font-weight: 500;
    }

    .trainer-name {
        font-weight: bold;
        color: #ff9f43;
        display: block;
    }

    .sub-text {
        font-size: 0.8rem;
        color: #8395a7;
    }

    /* Saat kutucuğu */
    .time-badge {
        background: #1e272e;
        color: #fff;
        padding: 6px 10px;
        border-radius: 6px;
        font-family: monospace;
        border: 1px solid #7f8fa6;
        font-weight: bold;
    }

    /* Durum Etiketleri */
    .status-badge {
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .bg-approved {
        background: rgba(46, 204, 113, 0.15);
        color: #2ecc71;
        border: 1px solid #2ecc71;
    }

    .bg-rejected {
        background: rgba(231, 76, 60, 0.15);
        color: #e74c3c;
        border: 1px solid #e74c3c;
    }

    .bg-pending {
        background: rgba(241, 196, 15, 0.15);
        color: #f1c40f;
        border: 1px solid #f1c40f;
    }

    .bg-cancelled {
        background: rgba(149, 165, 166, 0.15);
        color: #95a5a6;
        border: 1px solid #95a5a6;
    }

    /* Butonlar */
    .btn-action {
        padding: 6px 15px;
        border-radius: 6px;
        font-size: 0.8rem;
        font-weight: 700;
        border: none;
        color: white;
        transition: 0.2s;
    }

    .btn-approve {
        background: #27ae60;
    }

        .btn-approve:hover {
            background: #2ecc71;
            box-shadow: 0 0 10px #2ecc71;
        }

    .btn-reject {
        background: #c0392b;
    }

        .btn-reject:hover {
            background: #e74c3c;
            box-shadow: 0 0 10px #e74c3c;
        }
</style>

<div class="container" style="margin-top: 100px; margin-bottom: 80px;">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-white fw-bold"><i class="fas fa-tasks me-2"></i>Randevu Yönetimi</h2>
        <span class="badge bg-primary fs-6">Toplam: @Model.Count()</span>
    </div>

    <div class="admin-card">
        <div class="table-responsive">
            <table class="table-custom">
                <thead>
                    <tr>
                        <th>#ID</th>
                        <th>Üye Bilgisi</th>
                        <th>Antrenör & Branş</th>
                        <th>Tarih / Saat</th>
                        <th>Durum</th>
                        <th class="text-end">İşlemler</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td class="text-muted">#@item.Id</td>
                            <td>
                                <div class="user-email">@item.MemberId</div>
                            </td>
                            <td>
                                <span class="trainer-name">@item.Trainer?.FirstName @item.Trainer?.LastName</span>
                                <span class="sub-text">@item.Service?.Name</span>
                            </td>
                            <td>
                                <div class="mb-1 text-white"><i class="far fa-calendar me-1"></i> @item.AppointmentDate.ToString("dd.MM.yyyy")</div>
                                <span class="time-badge"><i class="far fa-clock me-1"></i> @item.AppointmentTime</span>
                            </td>
                            <td>
                                @if (item.Status == SporSalonu2.Models.BookingStatus.Approved)
                                {
                                    <span class="status-badge bg-approved">Onaylandı</span>
                                }
                                else if (item.Status == SporSalonu2.Models.BookingStatus.Rejected)
                                {

                                    <span class="status-badge bg-rejected">Reddedildi</span>
                                }
                                else if (item.Status == SporSalonu2.Models.BookingStatus.Pending)
                                {

                                    <span class="status-badge bg-pending">Bekliyor</span>
                                }
                                else
                                {

                                    <span class="status-badge bg-cancelled">İptal</span>
                                }
                            </td>
                            <td class="text-end">
                                @if (item.Status == SporSalonu2.Models.BookingStatus.Pending)
                                {
                                    <form asp-action="ApproveBooking" method="post" style="display:inline;">
                                        <input type="hidden" name="id" value="@item.Id" />
                                        <button class="btn-action btn-approve me-1">ONAYLA</button>
                                    </form>
                                    <form asp-action="RejectBooking" method="post" style="display:inline;">
                                        <input type="hidden" name="id" value="@item.Id" />
                                        <button class="btn-action btn-reject">REDDET</button>
                                    </form>
                                }
                                else
                                {
                                    <span class="text-muted small">İşlem Tamam</span>
                                }
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>